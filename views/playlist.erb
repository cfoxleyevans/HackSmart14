<!DOCTYPE html>
<html>
<head>
  <title>The Genre Radio Demo</title>
  <script src="/js/jquery.min.js" type="text/javascript"></script>
</head>

<body>
<div id="all_results">
  <div id='tracks'>
    <div id="results"> </div>
  </div>
</div>
</body>

<script type="text/javascript">
    $(document).ready(function() {
    var embed = '<iframe src="https://embed.spotify.com/?uri=spotify:trackset:PREFEREDTITLE:TRACKS" style="width:640px; height:540px;" frameborder="0" allowtransparency="true"></iframe>';

        $.getJSON('/music/playlist.json', {
            speed: 0.5,
            energy: 0.1
        },function(data) {

            $("#results").empty();
            if (! ('songs' in data.response)) {

            } else {


                $("#all_results").show();
                var tracks = "";
                for (var i = 0; i < data.response.songs.length; i++) {
                    var song = data.response.songs[i];
                    if(song.tracks.length > 0) {
                        var tid = song.tracks[0].foreign_id.replace('spotify-WW:track:', '');
                        tracks = tracks + tid + ',';
                    }
                }
                var tembed = embed.replace('TRACKS', tracks);
                tembed = tembed.replace('PREFEREDTITLE', 'Playlist');
                var li = $("<span>").html(tembed);
                $("#results").append(li);
            }
        });

    });

</script>
</html>